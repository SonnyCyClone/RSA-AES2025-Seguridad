<div class="rsa-container">
  <header class="header">
    <h1>Visualizador RSA Paso a Paso</h1>
    <p class="subtitle">Algoritmo de codificaci√≥n y descodificaci√≥n RSA</p>
  </header>

  <div class="controls">
    <button mat-raised-button color="accent" (click)="copyResults()" 
            [disabled]="!d" matTooltip="Copiar resultados al portapapeles">
      <mat-icon>content_copy</mat-icon>
      <span>Copiar Resultados</span>
    </button>
    <button mat-raised-button (click)="reset()" matTooltip="Reiniciar todos los valores">
      <mat-icon>refresh</mat-icon>
      <span>Reiniciar</span>
    </button>
  </div>

  <!-- Card 1: Par√°metros p y q -->
  <mat-card class="parameter-card">
    <mat-card-header>
      <mat-card-title>Paso 1: Selecci√≥n de N√∫meros Primos</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="primesForm" class="primes-form">
        <mat-form-field appearance="outline">
          <mat-label>Primo p</mat-label>
          <input matInput type="number" formControlName="p" 
                 pattern="[0-9]+" min="3" step="1"
                 (keydown)="onlyNumbers($event)"
                 aria-label="N√∫mero primo p">
          <mat-hint>Debe ser un n√∫mero primo entero mayor que 2</mat-hint>
          <mat-error *ngIf="primesForm.get('p')?.hasError('pattern')">
            Solo se permiten n√∫meros enteros
          </mat-error>
          <mat-error *ngIf="primesForm.get('p')?.hasError('min')">
            Debe ser mayor que 2
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Primo q</mat-label>
          <input matInput type="number" formControlName="q"
                 pattern="[0-9]+" min="3" step="1"
                 (keydown)="onlyNumbers($event)"
                 aria-label="N√∫mero primo q">
          <mat-hint>Debe ser un n√∫mero primo entero mayor que 2 y diferente de p</mat-hint>
          <mat-error *ngIf="primesForm.get('q')?.hasError('pattern')">
            Solo se permiten n√∫meros enteros
          </mat-error>
          <mat-error *ngIf="primesForm.get('q')?.hasError('min')">
            Debe ser mayor que 2
          </mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" (click)="validateAndCalculate()"
                aria-label="Validar primos y calcular n y phi">
          Validar y Calcular
        </button>
      </form>

      <div class="results" *ngIf="n !== null && phi !== null">
        <h4>Resultados:</h4>
        <mat-chip-set aria-label="Resultados calculados">
          <mat-chip highlighted><strong>n (m√≥dulo)</strong> = {{ n }}</mat-chip>
          <mat-chip highlighted><strong>œÜ(n) (totiente)</strong> = {{ phi }}</mat-chip>
        </mat-chip-set>
        <div class="formula-box">
          <p class="formula"><strong>n</strong> = p √ó q = {{ primesForm.get('p')?.value }} √ó {{ primesForm.get('q')?.value }} = {{ n }}</p>
          <p class="formula-explanation">donde <strong>p = {{ primesForm.get('p')?.value }}</strong> y <strong>q = {{ primesForm.get('q')?.value }}</strong> son n√∫meros primos</p>
          <p class="formula"><strong>œÜ(n)</strong> = (p - 1) √ó (q - 1) = {{ primesForm.get('p')?.value - 1 }} √ó {{ primesForm.get('q')?.value - 1 }} = {{ phi }}</p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Card 2: Exponente e -->
  <mat-card class="parameter-card" [class.disabled]="!phi">
    <mat-card-header>
      <mat-card-title>Paso 2: Selecci√≥n de Exponente (e)</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="candidates-table" *ngIf="candidateEs.length > 0">
        <h4>Valores posibles para el exponente e:</h4>
        <p class="candidates-count">Se encontraron <strong>{{ candidateEs.length }}</strong> candidatos v√°lidos</p>
        <div class="candidates-grid">
          <button *ngFor="let candidate of candidateEs" 
                  class="candidate-chip"
                  [class.selected]="eForm.get('e')?.value === candidate"
                  (click)="selectCandidate(candidate)"
                  type="button"
                  matTooltip="Click para seleccionar"
                  [attr.aria-label]="'Seleccionar exponente ' + candidate">
            {{ candidate }}
          </button>
        </div>
        <p class="hint">Todos cumplen: 1 &lt; e &lt; œÜ(n) y gcd(e, œÜ(n)) = 1</p>
      </div>

      <form [formGroup]="eForm" class="e-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Ingresa el exponente e</mat-label>
          <input matInput type="number" formControlName="e"
                 pattern="[0-9]+" min="2" step="1"
                 (keydown)="onlyNumbers($event)"
                 placeholder="Debe estar en la tabla de arriba"
                 aria-label="Ingresar exponente e">
          <mat-hint>Escribe un valor entero de la tabla de candidatos v√°lidos</mat-hint>
          <mat-error *ngIf="eForm.get('e')?.hasError('pattern')">
            Solo se permiten n√∫meros enteros
          </mat-error>
          <mat-error *ngIf="eForm.get('e')?.hasError('min')">
            Debe ser mayor que 1
          </mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" (click)="calculateD()"
                [disabled]="!phi || !eForm.get('e')?.value"
                aria-label="Calcular exponente privado d">
          <span>Calcular d (exponente privado)</span>
        </button>
      </form>

      <div class="results results-detailed" *ngIf="d !== null">
        <div class="theorem-box">
          <h3>üéì Teorema de Euler</h3>
          <p class="formula-main">d √ó e ‚â° 1 (mod œÜ(n))</p>
          <div class="variables-explanation">
            <p><strong>Donde:</strong></p>
            <ul>
              <li><code>d</code> = exponente privado (valor a calcular)</li>
              <li><code>e</code> = {{ eForm.get('e')?.value }} (exponente p√∫blico seleccionado)</li>
              <li><code>œÜ(n)</code> = {{ phi }} (funci√≥n totiente de Euler)</li>
              <li><code>k</code> = iterador que permite encontrar d</li>
            </ul>
          </div>
        </div>

        <div class="formula-box">
          <h3>üìê F√≥rmula de c√°lculo</h3>
          <p class="formula-secondary">d = (1 + k √ó œÜ(n)) / e</p>
          <p class="constraint">Donde k debe cumplir: (1 + k √ó œÜ(n)) % e = 0</p>
        </div>

        <div class="iterations-box" *ngIf="kIterations.length > 0">
          <h3>üîÑ Proceso iterativo para encontrar k</h3>
          <div class="iterations-table-wrapper">
            <table class="iterations-table">
              <thead>
                <tr>
                  <th>k</th>
                  <th>e</th>
                  <th>(k √ó œÜ(n) + 1) % e</th>
                  <th>Resultado</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let iteration of kIterations" [class.valid-iteration]="iteration.isValid">
                  <td>{{ iteration.k }}</td>
                  <td>{{ iteration.e }}</td>
                  <td>{{ iteration.remainder }}</td>
                  <td class="result-icon">{{ iteration.result }}</td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="iteration-details">
            <p class="iteration-found"><strong>k = {{ selectedK }}</strong> cumple la condici√≥n</p>
            <p class="iteration-calc">(k √ó œÜ(n) + 1) = {{ selectedK }} √ó {{ phi }} + 1 = <strong>{{ selectedK * (phi || 0) + 1 }}</strong></p>
            <p class="iteration-verify">Verificaci√≥n: {{ selectedK * (phi || 0) + 1 }} % {{ eForm.get('e')?.value }} = <span class="success">0 ‚úì</span></p>
            <p class="iteration-verify">{{ selectedK * (phi || 0) + 1 }} % {{ eForm.get('e')?.value }} = <span class="success">0 ‚úì</span></p>
          </div>
        </div>

        <div class="final-calc-box">
          <h3>‚ú® C√°lculo final de d</h3>
          <p class="formula-step">d = (1 + k √ó œÜ(n)) / e</p>
          <p class="formula-step">d = (1 + {{ selectedK }} √ó {{ phi }}) / {{ eForm.get('e')?.value }}</p>
          <p class="formula-step">d = {{ selectedK * (phi || 0) + 1 }} / {{ eForm.get('e')?.value }}</p>
          <p class="formula-result-final">d = <strong>{{ d }}</strong></p>
        </div>


        <div class="verification-box">
          <h3>‚úÖ Verificaci√≥n del Teorema de Euler</h3>
          <p class="formula">d √ó e ‚â° 1 (mod œÜ(n))</p>
          <p class="formula">{{ d }} √ó {{ eForm.get('e')?.value }} ‚â° 1 (mod {{ phi }})</p>
          <p class="verification">Comprobaci√≥n: {{ d }} √ó {{ eForm.get('e')?.value }} mod {{ phi }} = <span class="success">{{ (d! * eForm.get('e')!.value!) % phi! }} ‚úì</span></p>
        </div>

        <div class="keys-display">
          <div class="key-card public">
            <h4>üîì Llave p√∫blica</h4>
            <p>[ n = {{ n }}, e = {{ eForm.get('e')?.value }} ]</p>
          </div>
          <div class="key-card private">
            <h4>üîê Llave privada</h4>
            <p>[ n = {{ n }}, d = {{ d }} ]</p>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Card 3: Mensaje -->
  <mat-card class="parameter-card" [class.disabled]="!d">
    <mat-card-header>
      <mat-card-title>Paso 3: Codificar y Descodificar Mensaje</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="messageForm" class="message-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Tipo de codificaci√≥n</mat-label>
          <mat-select formControlName="encodingType" aria-label="Tipo de codificaci√≥n">
            <mat-option value="ASCII">ASCII</mat-option>
            <mat-option value="UTF-8">UTF-8</mat-option>
            <mat-option value="Base64">Base64</mat-option>
            <mat-option value="Hexadecimal">Hexadecimal</mat-option>
          </mat-select>
          <mat-hint>Selecciona el tipo de codificaci√≥n para el mensaje</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Mensaje</mat-label>
          <input matInput formControlName="message" 
                 placeholder="Ingresa el texto a codificar"
                 aria-label="Mensaje a codificar">
          <mat-hint>Escribe el mensaje que deseas codificar</mat-hint>
        </mat-form-field>

        <div class="button-group">
          <div class="button-section">
            <h4>Clave P√∫blica (codificar ‚Üí descodificar)</h4>
            <button mat-raised-button color="primary" (click)="encodePublic()"
                    [disabled]="!d || isCalculating || !messageForm.get('message')?.value"
                    aria-label="Codificar mensaje con clave p√∫blica">
              <mat-icon>lock</mat-icon>
              <span>Codificar (P√∫blica)</span>
            </button>
            <button mat-raised-button color="accent" (click)="decodePrivate()"
                    [disabled]="encodedMessage.length === 0 || isCalculating"
                    aria-label="Descodificar mensaje con clave privada">
              <mat-icon>lock_open</mat-icon>
              <span>Descodificar (Privada)</span>
            </button>
          </div>

          <div class="button-section">
            <h4>Clave Privada (firma ‚Üí verificaci√≥n)</h4>
            <button mat-raised-button color="primary" (click)="encodePrivate()"
                    [disabled]="!d || isCalculating || !messageForm.get('message')?.value"
                    aria-label="Codificar mensaje con clave privada">
              <mat-icon>edit</mat-icon>
              <span>Codificar (Privada)</span>
            </button>
            <button mat-raised-button color="accent" (click)="decodePublic()"
                    [disabled]="encodedPrivateMessage.length === 0 || isCalculating"
                    aria-label="Descodificar mensaje con clave p√∫blica">
              <mat-icon>verified</mat-icon>
              <span>Descodificar (P√∫blica)</span>
            </button>
          </div>
        </div>

        <mat-spinner *ngIf="isCalculating" diameter="40"></mat-spinner>
      </form>

      <div class="message-results" *ngIf="encodedMessage.length > 0">
        <h4>Mensaje Codificado (P√∫blica):</h4>
        <pre class="monospace">[ {{ encodedMessage.join(', ') }} ]</pre>
      </div>

      <div class="message-results" *ngIf="decodedMessage">
        <h4>Mensaje Descodificado (Privada):</h4>
        <pre class="monospace">{{ decodedMessage }}</pre>
      </div>

      <div class="message-results" *ngIf="encodedPrivateMessage.length > 0">
        <h4>Mensaje Codificado (Privada - Firma):</h4>
        <pre class="monospace">[ {{ encodedPrivateMessage.join(', ') }} ]</pre>
      </div>

      <div class="message-results" *ngIf="decodedPublicMessage">
        <h4>Mensaje Descodificado (P√∫blica - Verificaci√≥n):</h4>
        <pre class="monospace">{{ decodedPublicMessage }}</pre>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Card 4: Paso a paso -->
  <mat-card class="steps-card" *ngIf="showSteps">
    <mat-card-header>
      <mat-card-title>Visualizaci√≥n Paso a Paso</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-stepper orientation="vertical" #stepper>
        
        <!-- Paso A: Verificaci√≥n de Primalidad -->
        <mat-step label="Verificaci√≥n de Primalidad de p y q">
          <div class="step-content">
            <h3>Verificaci√≥n de p = {{ primesForm.get('p')?.value }}</h3>
            <pre class="monospace" *ngIf="primeCheckP">Probando divisores hasta ‚àö{{ primesForm.get('p')?.value }} ‚âà {{ Math.sqrt(primesForm.get('p')?.value).toFixed(2) }}
Divisores probados: {{ primeCheckP.divisors.join(', ') }}
Resultado: {{ primeCheckP.isPrime ? '‚úì ES PRIMO' : '‚úó NO ES PRIMO' }}</pre>

            <h3>Verificaci√≥n de q = {{ primesForm.get('q')?.value }}</h3>
            <pre class="monospace" *ngIf="primeCheckQ">Probando divisores hasta ‚àö{{ primesForm.get('q')?.value }} ‚âà {{ Math.sqrt(primesForm.get('q')?.value).toFixed(2) }}
Divisores probados: {{ primeCheckQ.divisors.join(', ') }}
Resultado: {{ primeCheckQ.isPrime ? '‚úì ES PRIMO' : '‚úó NO ES PRIMO' }}</pre>

            <button mat-button matStepperNext>Siguiente</button>
          </div>
        </mat-step>

        <!-- Paso B: C√°lculo de n y œÜ(n) -->
        <mat-step label="C√°lculo de n y œÜ(n)">
          <div class="step-content">
            <h3>C√°lculo de n (m√≥dulo)</h3>
            <pre class="monospace">n = p √ó q
n = {{ primesForm.get('p')?.value }} √ó {{ primesForm.get('q')?.value }}
n = {{ n }}</pre>

            <h3>C√°lculo de œÜ(n) (funci√≥n de Euler)</h3>
            <pre class="monospace">œÜ(n) = (p - 1) √ó (q - 1)
œÜ(n) = ({{ primesForm.get('p')?.value }} - 1) √ó ({{ primesForm.get('q')?.value }} - 1)
œÜ(n) = {{ primesForm.get('p')?.value - 1 }} √ó {{ primesForm.get('q')?.value - 1 }}
œÜ(n) = {{ phi }}</pre>

            <button mat-button matStepperPrevious>Anterior</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>
        </mat-step>

        <!-- Paso C: Validaci√≥n de e -->
        <mat-step label="Selecci√≥n y Validaci√≥n de e">
          <div class="step-content">
            <h3>Condiciones para e:</h3>
            <pre class="monospace">1. 1 &lt; e &lt; œÜ(n)
2. gcd(e, œÜ(n)) = 1 (e y œÜ(n) son coprimos)</pre>

            <h3>Exponente seleccionado: e = {{ eForm.get('e')?.value }}</h3>
            <pre class="monospace">Verificaci√≥n:
1 &lt; {{ eForm.get('e')?.value }} &lt; {{ phi }} ‚úì
gcd({{ eForm.get('e')?.value }}, {{ phi }}) = 1 ‚úì</pre>

            <h3>Candidatos v√°lidos:</h3>
            <pre class="monospace">{{ candidateEs.join(', ') }}</pre>

            <button mat-button matStepperPrevious>Anterior</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>
        </mat-step>

        <!-- Paso D: C√°lculo de d con Teorema de Euler -->
        <mat-step label="C√°lculo de d (Teorema de Euler)">
          <div class="step-content">
            <div class="theorem-box-stepper">
              <h3>üéì Teorema de Euler</h3>
              <p class="formula-main">d √ó e ‚â° 1 (mod œÜ(n))</p>
              <div class="variables-explanation">
                <p><strong>Donde:</strong></p>
                <ul>
                  <li><code>d</code> = exponente privado (valor a calcular)</li>
                  <li><code>e</code> = {{ eForm.get('e')?.value }} (exponente p√∫blico)</li>
                  <li><code>œÜ(n)</code> = {{ phi }} (totiente de Euler)</li>
                  <li><code>k</code> = iterador para encontrar d</li>
                </ul>
              </div>
            </div>

            <div class="formula-box-stepper">
              <h3>üìê F√≥rmula de c√°lculo</h3>
              <p class="formula-secondary">d = (1 + k √ó œÜ(n)) / e</p>
              <p class="constraint">Condici√≥n: (1 + k √ó œÜ(n)) % e = 0</p>
            </div>

            <div class="iterations-box-stepper" *ngIf="kIterations.length > 0">
              <h3>üîÑ Proceso iterativo para encontrar k</h3>
              <div class="table-container">
                <table class="iterations-table">
                  <thead>
                    <tr>
                      <th>k</th>
                      <th>e</th>
                      <th>(k √ó œÜ(n) + 1) % e</th>
                      <th>‚úì/‚úó</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let iteration of kIterations" [class.valid-iteration]="iteration.isValid">
                      <td>{{ iteration.k }}</td>
                      <td>{{ iteration.e }}</td>
                      <td>{{ iteration.remainder }}</td>
                      <td class="result-icon">{{ iteration.result }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              
              <div class="iteration-summary">
                <p><strong>k = {{ selectedK }}</strong> cumple la condici√≥n</p>
                <p>(k √ó œÜ(n) + 1) = {{ selectedK }} √ó {{ phi }} + 1 = {{ selectedK * (phi || 0) + 1 }}</p>
                <p>{{ selectedK * (phi || 0) + 1 }} % {{ eForm.get('e')?.value }} = 0 ‚úì</p>
              </div>
            </div>

            <div class="final-calc-box-stepper">
              <h3>‚ú® C√°lculo final</h3>
              <pre class="monospace">d = (1 + k √ó œÜ(n)) / e
d = (1 + {{ selectedK }} √ó {{ phi }}) / {{ eForm.get('e')?.value }}
d = {{ selectedK * (phi || 0) + 1 }} / {{ eForm.get('e')?.value }}
d = {{ d }}</pre>
            </div>

            <div class="verification-box-stepper">
              <h3>‚úÖ Verificaci√≥n</h3>
              <pre class="monospace">{{ d }} √ó {{ eForm.get('e')?.value }} mod {{ phi }} = {{ (d! * eForm.get('e')!.value!) % phi! }} ‚úì</pre>
            </div>

            <button mat-button matStepperPrevious>Anterior</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>
        </mat-step>

        <!-- Paso E: Codificaci√≥n del Mensaje -->
        <mat-step label="Codificaci√≥n del Mensaje" *ngIf="encodeOperations.length > 0">
          <div class="step-content">
            <h3>Codificaci√≥n Car√°cter por Car√°cter (Clave P√∫blica)</h3>
            <p>F√≥rmula: C = M<sup>e</sup> mod n</p>
            
            <div class="table-container">
              <table class="operations-table">
                <thead>
                  <tr>
                    <th>Car√°cter</th>
                    <th>ASCII (M)</th>
                    <th>Operaci√≥n</th>
                    <th>Resultado (C)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let op of encodeOperations">
                    <td>{{ op.char }}</td>
                    <td>{{ op.ascii }}</td>
                    <td class="monospace">{{ op.operation }}</td>
                    <td>{{ op.result }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <button mat-button matStepperPrevious>Anterior</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>
        </mat-step>

        <!-- Paso F: Descodificaci√≥n del Mensaje -->
        <mat-step label="Descodificaci√≥n del Mensaje" *ngIf="decodeOperations.length > 0">
          <div class="step-content">
            <h3>Descodificaci√≥n Car√°cter por Car√°cter (Clave Privada)</h3>
            <p>F√≥rmula: M = C<sup>d</sup> mod n</p>
            
            <div class="table-container">
              <table class="operations-table">
                <thead>
                  <tr>
                    <th>Codificado (C)</th>
                    <th>Operaci√≥n</th>
                    <th>ASCII (M)</th>
                    <th>Car√°cter</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let op of decodeOperations">
                    <td>{{ op.ascii }}</td>
                    <td class="monospace">{{ op.operation }}</td>
                    <td>{{ op.result }}</td>
                    <td>{{ op.resultChar }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <button mat-button matStepperPrevious>Anterior</button>
          </div>
        </mat-step>

        <!-- Paso G: Codificaci√≥n con Clave Privada (Firma) -->
        <mat-step label="Codificaci√≥n con Clave Privada (Firma)" *ngIf="encodePrivateOperations.length > 0">
          <div class="step-content">
            <h3>Codificaci√≥n con Clave Privada (Firma Digital)</h3>
            <p>F√≥rmula: S = M<sup>d</sup> mod n</p>
            
            <div class="table-container">
              <table class="operations-table">
                <thead>
                  <tr>
                    <th>Car√°cter</th>
                    <th>ASCII (M)</th>
                    <th>Operaci√≥n</th>
                    <th>Resultado (S)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let op of encodePrivateOperations">
                    <td>{{ op.char }}</td>
                    <td>{{ op.ascii }}</td>
                    <td class="monospace">{{ op.operation }}</td>
                    <td>{{ op.result }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <button mat-button matStepperPrevious>Anterior</button>
            <button mat-button matStepperNext>Siguiente</button>
          </div>
        </mat-step>

        <!-- Paso H: Descodificaci√≥n con Clave P√∫blica (Verificaci√≥n) -->
        <mat-step label="Descodificaci√≥n con Clave P√∫blica (Verificaci√≥n)" *ngIf="decodePublicOperations.length > 0">
          <div class="step-content">
            <h3>Descodificaci√≥n con Clave P√∫blica (Verificaci√≥n de Firma)</h3>
            <p>F√≥rmula: M = S<sup>e</sup> mod n</p>
            
            <div class="table-container">
              <table class="operations-table">
                <thead>
                  <tr>
                    <th>Firmado (S)</th>
                    <th>Operaci√≥n</th>
                    <th>ASCII (M)</th>
                    <th>Car√°cter</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let op of decodePublicOperations">
                    <td>{{ op.ascii }}</td>
                    <td class="monospace">{{ op.operation }}</td>
                    <td>{{ op.result }}</td>
                    <td>{{ op.resultChar }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <button mat-button matStepperPrevious>Anterior</button>
          </div>
        </mat-step>

      </mat-stepper>
    </mat-card-content>
  </mat-card>
</div>
